/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/window_control_placeholder_support.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

/* Creates placeholders for window controls */
/* This is a supporting file used by other stylesheets */

/* This stylesheet is pretty much unnecessary if window titlebar is enabled */

/* This file should preferably be imported before other stylesheets */

/* Defaults for window controls on RIGHT side of the window */
/* Modify these values to match your preferences */
:root:is([tabsintitlebar], [sizemode="fullscreen"]) {
    --uc-window-control-width: 138px; /* Space reserved for window controls (Win10) */
    /* Extra space reserved on both sides of the nav-bar to be able to drag the window */
    --uc-window-drag-space-pre: 30px; /* left side*/
    --uc-window-drag-space-post: 30px; /* right side*/
}

:root:is([tabsintitlebar][sizemode="maximized"], [sizemode="fullscreen"]) {
    --uc-window-drag-space-pre: 0px; /* Remove pre space */
}

@media  (-moz-platform: windows-win7),
(-moz-platform: windows-win8),
(-moz-os-version: windows-win7),
(-moz-os-version: windows-win8){
    :root:is([tabsintitlebar], [sizemode="fullscreen"]) {
	--uc-window-control-width: 105px;
    }
}

@media (-moz-gtk-csd-available) {
    :root:is([tabsintitlebar],[sizemode="fullscreen"]) {
	--uc-window-control-width: 84px;
    }
}

/* macOS settings are further below */
.titlebar-buttonbox, #window-controls{ color: var(--toolbar-color) }
:root[sizemode="fullscreen"] .titlebar-buttonbox-container{ display: none }
:root[sizemode="fullscreen"] #navigator-toolbox { position: relative; }

:root[sizemode="fullscreen"] #TabsToolbar > .titlebar-buttonbox-container:last-child,
:root[sizemode="fullscreen"] #window-controls{
    position: absolute;
    display: flex;
    top: 0;
    right:0;
    height: 40px;
}

:root[sizemode="fullscreen"] #TabsToolbar > .titlebar-buttonbox-container:last-child,
:root[uidensity="compact"][sizemode="fullscreen"] #window-controls{ height: 32px }

#nav-bar{
    border-inline: var(--uc-window-drag-space-pre,0px) solid var(--toolbar-bgcolor);
    border-inline-style: solid !important;
    border-right-width: calc(var(--uc-window-control-width,0px) + var(--uc-window-drag-space-post,0px));
}

/* Use this pref to check Mac OS where window controls are on left */
/* This pref defaults to true on Mac and doesn't actually do anything on other platforms. So if your system has window controls on LEFT side you can set the pref to true */
@supports -moz-bool-pref("layout.css.osx-font-smoothing.enabled"){
    :root:is([tabsintitlebar], [sizemode="fullscreen"]) {
	--uc-window-control-width: 72px;
    }
    :root[tabsintitlebar="true"]:not([inFullscreen]) #nav-bar{
	border-inline-width: calc(var(--uc-window-control-width,0px) + var(--uc-window-drag-space-post,0px)) var(--uc-window-drag-space-pre,0px)
    }
    :root[sizemode="fullscreen"] #TabsToolbar > .titlebar-buttonbox-container:last-child,
    :root[sizemode="fullscreen"] #window-controls{ right: unset }
}

/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/tabs_on_bottom.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

/* Modify to change window drag space width */
/*
Use tabs_on_bottom_menubar_on_top_patch.css if you
have menubar permanently enabled and want it on top
*/

/* IMPORTANT */
/*
Get window_control_placeholder_support.css
Window controls will be all wrong without it.
Additionally on Linux, you may need to get:
linux_gtk_window_control_patch.css
*/

#toolbar-menubar[autohide="true"] > .titlebar-buttonbox-container,
#TabsToolbar > .titlebar-buttonbox-container{
    position: fixed;
    display: block;
    top: 0px;
    right:0;
    height: 40px;
}
/* Mac specific. You should set that font-smoothing pref to true if you are on any platform where window controls are on left */
@supports -moz-bool-pref("layout.css.osx-font-smoothing.enabled"){
    .titlebar-buttonbox-container{ left:0; right: unset !important; }
}

:root[uidensity="compact"] #TabsToolbar > .titlebar-buttonbox-container{ height: 32px }

#toolbar-menubar[inactive] > .titlebar-buttonbox-container{ opacity: 0 }

.titlebar-buttonbox-container > .titlebar-buttonbox{ height: 100%; }

#titlebar{
    -moz-box-ordinal-group: 2;
    -moz-appearance: none !important;
    --tabs-navbar-shadow-size: 0px;
}
/* Re-order window and tab notification boxes */
#navigator-toolbox > div{ display: contents }
.global-notificationbox,
#tab-notification-deck{ -moz-box-ordinal-group: 2 }

#TabsToolbar .titlebar-spacer{ display: none; }
/* Also hide the toolbox bottom border which isn't at bottom with this setup */
#navigator-toolbox::after{ display: none !important; }

@media (-moz-gtk-csd-close-button){ .titlebar-button{ -moz-box-orient: vertical } }

/* At Activated Menubar */
:root:not([chromehidden~="menubar"], [sizemode="fullscreen"]) #toolbar-menubar:not([autohide="true"]) + #TabsToolbar > .titlebar-buttonbox-container {
    display: block !important;
}
#toolbar-menubar:not([autohide="true"]) > .titlebar-buttonbox-container {
    visibility: hidden;
}

/* These exist only for compatibility with autohide-tabstoolbar.css */
toolbox#navigator-toolbox > toolbar#nav-bar.browser-toolbar{ animation: none; }
#navigator-toolbox:hover #TabsToolbar{ animation: slidein ease-out 48ms 1 }
#TabsToolbar > .titlebar-buttonbox-container{ visibility: visible }
#navigator-toolbox:not(:-moz-lwtheme){ background-color: -moz-dialog }

/* Uncomment the following if you want bookmarks toolbar to be below tabs */
/*
#PersonalToolbar{ -moz-box-ordinal-group: 2 }
*/

/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/urlbar_centered_text.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

#urlbar:not([focused]) #urlbar-input, /* ID for Firefox 70 */
#urlbar:not([focused]) .urlbar-input{ text-align: center !important; }

/* Modified version of https://github.com/arp242/MartinFox */

/* Darker colour for inactive tabs */
/* #navigator-toolbox { background-color: #d3d3d3 !important; } */

/* Match active tabs with toolbar colour */
#tabbrowser-tabs:not([movingtab]) >#tabbrowser-arrowscrollbox >.tabbrowser-tab >.tab-stack >.tab-background[multiselected="true"],
#tabbrowser-tabs:not([movingtab]) >#tabbrowser-arrowscrollbox >.tabbrowser-tab >.tab-stack >.tab-background[selected="true"] {
    background-image: none !important; background-color: var(--toolbar-bgcolor) !important;
}

/* Remove weird gap between pinned and normal tabs. */
#tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs]) >#tabbrowser-arrowscrollbox >.tabbrowser-tab[first-visible-unpinned-tab] {
    margin-inline-start: 0 !important;
}

/* Remove margin around tabs */
:root { --tab-border-radius: 0 !important; --tab-block-margin: 0 !important; }

/* Add border between tabs. */
/* .tab-background { border-right: 0.5px solid rgba(0,0,0,.3) !important; margin-left: -2px !important; }
.tab-background { border-left: 0.5px solid rgba(0,0,0,.3) !important; margin-right: -2px !important; } */

/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/tab_separator_lines.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

/* Bring back tab separator lines that were removed in Proton */

.tabbrowser-tab{
    border-inline-end: 1px solid transparent !important;
    border-image: 0 1 linear-gradient(
	transparent 20%,
	color-mix(in srgb, currentColor 20%, transparent) 20%,
	color-mix(in srgb, currentColor 20%, transparent) 80%,
	transparent 80%
    );
}

.tabbrowser-tab:hover,
.tabbrowser-tab[beforehovered],
.tabbrowser-tab[selected],
.tabbrowser-tab[last-visible-tab],
.tabbrowser-tab[beforeselected-visible]{ border-image: none !important; }

/* The box shadow/border for selected tabs looks weird with the above. */
.tabbrowser-tab:is([visuallyselected="true"], [multiselected]) >.tab-stack >.tab-background { box-shadow: none !important; }

/* No gap between last tab and new tab button. */
.tabbrowser-tab[last-visible-tab="true"] { padding-inline-end: 0 !important; }
#tabs-newtab-button                      { padding-left: 0 !important; }

/* Set URL bar background colour and add a border. */
#urlbar-input-container { background-color: #fff !important; border: 1px solid hsla(240,5%,5%,.25) !important; }

/* No need for this margin. */
#urlbar-container { margin-left: 0 !important; }

/* Don't show these pointless search buttons in URL bar dropdown */
.search-one-offs { display: none !important; }

/* Don't show icons for bookmark toolbar items; they're kind of pointless as I
   just have bookmarklets in there with a generic icon. Just the text is enough. */
.bookmark-item .toolbarbutton-icon              { display: none; }
toolbarbutton.bookmark-item:not(.subviewbutton) { min-width: 1.6em; }

/* Toolbar stuff I never use. */
#tracking-protection-icon-container,  /* "Tracking protection */
#urlbar-zoom-button,                  /* Zoom indicator in URL bar */
#pageActionButton,                    /* Page actions dropdown in URL bar */
#pageActionSeparator                  /* Now pointless whitespace */
{ display: none; }

/* Disable all sorts of things from right-click menu that I never use. */
#context-navigation, /* back/forward etc. */
#context-pocket,
#context-sendpagetodevice,
#context-viewsource,
#context-inspect-a11y,
#context-sendlinktodevice,
#context-openlinkinusercontext-menu,
#context-bookmarklink,
#context-savelink,
#context-savelinktopocket,
#context-sendlinktodevice,
#context-searchselect,
#context-sendimage,
#context-print-selection
{ display: none !important; }

/* Tab */
#context_bookmarkTab,
#context_moveTabOptions,
#context_sendTabToDevice,
#context_reopenInContainer,
#context_selectAllTabs,
#context_closeTabOptions /* "Close multiple tabs" */
{ display: none !important; }

/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/tab_close_button_always_on_hover.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

/* Always show tab close button on hover */
.tabbrowser-tab:not([pinned]):hover .tab-close-button{
    display:-moz-box !important;
}
